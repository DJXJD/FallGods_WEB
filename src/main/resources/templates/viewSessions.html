<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/">

<head>
	<meta charset="UTF-8">
	<th:block th:replace="~{index :: stdHead}" />
	<script defer type="text/javascript" src="/javascript/viewSessions.js"></script>
	<title>View Sessions - FallGods</title>
</head>

<body>

	<div class="ContainerForAll">
		<div class="ButtonAndContentWrapper">
			<button id="OpenCloseBtn">&#9776; Open Sidebar</button>
		</div>
		<div class="SideBarContainer">
			<div class="SideBarTopArea">
				<div style="margin-top: 75px; margin-bottom: 75px;"></div>
				<a class="SideBarNavLinks" href="/">
					<div class="IconTextHContainer">
						<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
							<use href="/icons/Home_Icon.svg#Home" />
						</svg>
						<div class="SideBarLinkText">Overview</div>
					</div>
				</a>
				<a class="SideBarNavLinks" href="/track">
					<div class="IconTextHContainer ">
						<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
							<use href="/icons/Track_Icon.svg#Track" />
						</svg>
						<div class="SideBarLinkText">Track</div>
					</div>
				</a>
				<a class="SideBarNavLinks" href="/track/setGroup">
					<div class="IconTextHContainer">
						<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
							<use href="/icons/SetGroup_Icon.svg#SetGroup" />
						</svg>
						<div class="SideBarLinkText">Set Group</div>
					</div>
				</a>
				<a class="SideBarNavLinks" href="/register">
					<div class="IconTextHContainer">
						<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
							<use href="/icons/Register_Icon.svg#Register" />
						</svg>
						<div class="SideBarLinkText">Register</div>
					</div>
				</a>
				<div class="ViewLinkContainer">
					<div class="ViewInnerContainer">
						<div class="accordion">
							<div class="IconTextHContainer">
								<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
									<use href="/icons/View_Icon.svg#View" />
								</svg>
								<div class="SideBarLinkText">View</div>
							</div>
						</div>
						<div class="panel">
							<a class="SideBarNavLinks" href="/view/sessions">
								<div class="IconTextHContainer">
									<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
										<use href="/icons/Sessions_Icon.svg#Sessions" />
									</svg>
									<div class="SideBarLinkText">Sessions</div>
								</div>
							</a>
							<a class="SideBarNavLinks" href="/view/players">
								<div class="IconTextHContainer">
									<svg viewBox="0 0 24 24" height="1.5em" class="SideBarIcon">
										<use href="/icons/Player_Icon.svg#Player" />
									</svg>
									<div class="SideBarLinkText">Players</div>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>
			<div class="SideBarBottomArea">
				<footer>
					<div>
						<p>Poof Games Media Â© 2023</p>
						<p>Terms and Conditions</p>
						<p>Conditions Of Use</p>
						<p>Privacy Policy</p>
						<form th:fragment="themeSelector" id="themeForm" action="/setTheme" method="post" hidden>
							<select id="theme" th:field="${theme.name}">
								<option th:each="t : ${themes}" th:text="${t}" th:value="${t}"></option>
							</select>
							<input type="hidden" name="sourcePath"
								th:value="${#ctx['org.springframework.web.util.ServletRequestPathUtils.PATH']}">
						</form>
					</div>
				</footer>
			</div>
		</div>
		<div class="MainContentContainer">
				<header class="center">
					<h1>View Sessions</h1>
				</header>
				<main class="vcontainer" style="row-gap: 1.25em;">
					<div class="hcontainer close">
						<button id="expandAll">Expand All</button>
						<button id="collapseAll">Collapse All</button>
					</div>
					<div class="hocontainer vocontainer" style="max-width: 100vw; max-height: 75vh;">
						<table border="1">
							<thead>
								<tr>
									<th></th>
									<th>Start Date</th>
									<th>Main Players</th>
									<th>Duration</th>
									<th>Wins</th>
									<th>Losses</th>
									<th>Win Rate</th>
									<th>Current Streak</th>
									<th>Highest Streak</th>
									<th>Finished</th>
									<th>Notes</th>
								</tr>
							</thead>
							<tbody class="center" th:each="gameSession : ${gameSessions}" th:object="${gameSession}">
								<tr>
									<td class="td-folder-icon" th:fragment="tdFolderIcon">
										<svg viewBox="0 0 24 24" height="1.5em">
											<use href="/icons/arrow_right.svg#ar" />
										</svg>
										<svg viewBox="0 0 24 24" height="1.5em" style="display: none;">
											<use href="/icons/arrow_drop_down.svg#add" />
										</svg>
									</td>
									<td th:text="*{#temporals.format(matches[0].startDateTime.toLocalDate)}" />
									<td th:text="*{mainPlayerNames}" />
									<td th:text="*{#strings.substring(duration.withNanos(0), 2)}" />
									<td th:text="*{wins}" />
									<td th:text="*{losses}" />
									<td th:text="*{winRate}" />
									<td th:text="*{currentStreak}" />
									<td th:text="*{highestStreak}" />
									<td th:text="*{finished}" />
									<td th:text="*{notes}" />
								</tr>
								<tr style="display: none;">
									<td />
									<td colspan="10">
										<table border="1">
											<thead>
												<tr>
													<th></th>
													<th>&nbsp;#&nbsp;</th>
													<th>Start Time</th>
													<th>Duration</th>
													<th>Rounds</th>
													<th>Last Round (LR)</th>
													<th>LR Losers</th>
													<th>LR MVP</th>
													<th>Subs</th>
												</tr>
											</thead>
											<tbody class="center" th:each="match, iStat : *{matches}"
												th:object="${match}">
												<tr>
													<td th:replace="~{ :: tdFolderIcon}" />
													<td th:text="${iStat.count}"
														th:style="*{finished} ? ('background-color:' + (*{won} ? 'green;' : 'red;') + 'color: black;')">
													<td th:text="*{#temporals.format(startDateTime.toLocalTime)}">
													<td th:text="*{#strings.substring(duration.withNanos(0), 2)}">
													<td th:text="*{rounds.size}">
													<td
														th:text="*{rounds.size} > 0 ? *{lastRound.gameMode.friendlyName}">
													<td th:text="*{rounds.size} > 0 ? *{lastRound.losers}">
													<td
														th:text="*{rounds.size} > 0 and *{lastRound.mvp} != null ? *{lastRound.mvp.name}">
													<td th:text="*{subs}">
												</tr>
												<tr style="display: none;">
													<td />
													<td colspan="8">
														<table border="1">
															<thead>
																<tr>
																	<th>&nbsp;#&nbsp;</th>
																	<th>End Time</th>
																	<th>Duration</th>
																	<th>Game Mode</th>
																	<th>Finishers</th>
																	<th>MVP</th>
																	<th>Notes</th>
																</tr>
															</thead>
															<tbody>
																<tr th:each="round, iStat : *{rounds}"
																	th:object="${round}">
																	<td th:text="*{num}"
																		th:style="*{finalRound} ? ('background-color:' + (*{teamQualified} ? 'green;' : 'red;') + 'color: black;')" />
																	<td
																		th:text="*{#temporals.format(endDateTime.toLocalTime)}" />
																	<td
																		th:text="*{#strings.substring(duration.withNanos(0), 2)}" />
																	<td th:text="*{gameMode.friendlyName}" />
																	<td th:text="*{finishers}" />
																	<td th:text="*{mvp} != null ? *{mvp.name}" />
																	<td th:text="*{notes}" />
																</tr>
															</tbody>
														</table>
													</td>
												</tr>
											</tbody>
										</table>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</main>
			</div>
</body>

</html>